name: Automated QA Review

on:
  push:
    branches: [develop]

jobs:
  qa-review:
    runs-on: self-hosted
    timeout-minutes: 15
    steps:
      - name: Trigger QA Review
        run: |
          openclaw agent --agent product-engineer -m "
          ## QA Review Triggered (Glance Web)

          New code merged to develop:
          - **Commit**: ${{ github.sha }}
          - **Message**: ${{ github.event.head_commit.message }}
          - **Author**: ${{ github.event.head_commit.author.name }}
          - **Repo**: glance-web (React + Vite + TypeScript)
          - **Branch**: develop

          ### Instructions:
          1. Delegate to qa-dev (single instance) to review:
             - cd ~/glance-web && git fetch && git checkout develop && git pull
             - Run: npm ci && npm run lint && npx tsc -b --noEmit && npm run build
             - Run: npm run preview and test all pages in browser
             - Take screenshots of the current state
          2. Report results â€” DO NOT auto-merge or create PRs:
             - **ALL PASS**: Report QA passed with screenshots and details to the user
             - **ANY FAIL**: Report failures with details to the user
          3. The human will handle promotion to staging/main manually.
          "
